name: Notify Copilot Completion

on:
  pull_request:
    types: [synchronize] # PRã¸ã®æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆï¼ˆPushï¼‰ã‚’æ¤œçŸ¥

permissions:
  pull-requests: write
  contents: read

jobs:
  notify-user:
    runs-on: ubuntu-latest
    # æ¡ä»¶:
    # 1. PRãŒDraftã§ã¯ãªã„ (ReadyçŠ¶æ…‹ã§ã‚ã‚‹)
    # 2. Pushã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒBotã§ã‚ã‚‹
    # 3. ãã®Botåã« 'copilot' ãŒå«ã¾ã‚Œã‚‹
    if: |
      github.event.pull_request.draft == false &&
      github.event.sender.type == 'Bot' &&
      contains(github.event.sender.login, 'copilot')
    steps:
      - name: Notify PR Author
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PR_URL: ${{ github.event.pull_request.html_url }}
          PR_AUTHOR: ${{ github.event.pull_request.user.login }}
        run: |
          gh pr comment "$PR_URL" --body "@$PR_AUTHOR ğŸãƒ¬ãƒ“ãƒ¥ãƒ¼ãŠé¡˜ã„ã—ã¾ã™ğŸ : Copilot has finished applying the changes. Please review the updates."
